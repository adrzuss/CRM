{% extends 'base.html' %}
{% block body %}

<div class="container">
    <div class="row">
        <div class="col-md-12">
            <h1>Otorgamiento de crédito</h1>
        </div>
    </div>
    <div class="card">
        <div class="card-title">
            <h3 class="ml-3 mt-3">Datos para el otorgamiento del crédito</h3>
        </div>

        {% include 'partials/_modal-cliente.html' %}

        <div class="card-body">
            
            <form action="{{ url_for('creditos.generar_credito') }}" id="otorgamiento_form" method="post" enctype="multipart/form-data">
                <!-- Datos del cliente -->
                <div class="card mt-3 card-color-uno">
                    <div class="card-title">
                        <h4 class="ml-3 mt-3">Datos del cliente</h4>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-2">
                                <label for="idcliente"># Cliente</label>
                                <input class="form-control" type="text" name="idcliente" id="idcliente" placeholder="Ingrese el nombre" value="{{ cliente.nombre }}" required>
                            </div>
                            <div class="col-5">
                                <label for="cliente_nombre">Nombre</label>
                                <input class="form-control" type="text" name="cliente_nombre" id="cliente_nombre" value="{{ cliente.nombre }}" readonly>
                            </div>
                            <div class="col-3">
                                <label for="cliente_categoria">Categoría</label>
                                <input class="form-control" type="text" name="cliente_categoria" id="cliente_categoria" value="{{ cliente.categoria }}" readonly>
                            </div>
                        </div>
                    </div>    
                </div>     
                <!-- Datos del plan -->
                 <div class="card mt-3 card-color-dos">
                    <div class="card-title">
                        <h4 class="mt-3 ml-3">Datos del plan</h4>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-3">
                                <label for="idplan">Plan</label>
                                <select class="form-control" name="idplan" id="idplan" required>
                                    
                                </select>
                            </div>
                            <div class="col-2">
                                <label for="cuotas">Cuotas</label>
                                <input class="form-control" type="number" step="1" name="cuotas" id="cuotas" placeholder="Cantidad de cuotas" max="1" required>
                            </div>
                            <div class="col-2">
                                <label for="tasa_interes">Tasa de interés</label>
                                <input class="form-control" type="number" step="0.01" name="tasa_interes" id="tasa_interes" placeholder="Tasa de interés" readonly>
                            </div>
                            <div class="col-2">
                                <label for="garantes">Cant. garantes</label>
                                <input class="form-control" type="number" step="1" name="garantes" id="garantes" placeholder="Cantidad de garantes" readonly>
                            </div>
                        </div>
                        <!-- Datos del crédito plan de cuotas-->
                        <div class="row">
                            <div class="col-4">
                                <label for="monto_total">Monto del crédito</label>
                                <input class="form-control " type="number" step="0.01" name="monto_total" id="monto_total" placeholder="Monto del crédito" value="{{ credito.monto_total }}" required>
                            </div>
                            <div class="col-2">
                                <div class="form-check mt-4">
                                    <input class="form-check-input" type="checkbox" value="" id="anticipo" >
                                    <label class="form-check-label" for="anticipo"> Anticipo </label>
                                </div>
                            </div>
                            <div class="col-2">
                                <label for="fecha_solicitud">Fecha de solicitud</label>
                                {% if credito.fecha_solicitud %}
                                    <input class="form-control" type="date" name="fecha_solicitud" id="fecha_solicitud" placeholder="Fecha de solicitud" readonly value="{{ credito.fecha_solicitud }}">
                                {% else %}
                                    <input class="form-control" type="date" name="fecha_solicitud" id="fecha_solicitud" placeholder="Fecha de solicitud" readonly value="{{ fecha_solicitud }}">
                                {% endif %}
                            </div>
                            <div class="col-2">
                                <label for="fecha_inicio">Fecha de inicio / 1° cuota</label>
                                <input class="form-control" type="date" name="fecha_inicio" id="fecha_inicio" placeholder="Fecha de inicio" readonly value="{{ credito.fecha_inicio }}">
                            </div>
                        </div>
                    </div>    
                </div>    
                <div class="card mt-3 card-color-tres">
                    <div class="card-title">
                        <h4 class="ml-3 mt-3">Datos de los garantes</h4>
                    </div>
                    <div class="card-body" id="datos_garantes">
                    </div>
                </div>
                
                <div class="row mt-3">
                    <div class="col-4">
                        <a class="btn btn-secundario" href="#" id="generar">Generar cuotas</a>
                    </div>
                </div>
                <div class="card mt-3 card-color-cuatro">
                    <div class="card-title">
                        <h3 class="ml-3 mt-3">Detalles del crédito</h3>
                        <div class="row">
                            <div class="col-6 ml-3">
                                <h3 id="monto_cuota" for="cuota_credito">Monto cuota:</h3>
                                <input type="text" class="form-control col-4" id="cuota_credito" readonly hidden>
                            </div>    
                        </div>    
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                        <table class="table table-dark">
                            <thead>
                                <tr>
                                    <th scope="col"># Cuota</th>
                                    <th scope="col">Cuota</th>
                                    <th scope="col">Interes</th>
                                    <th scope="col">Capital</th>
                                    <th scope="col">Saldo</th>
                                </tr>
                            </thead>
                            <tbody id="lst_cuotas">
                                
                            </tbody>
                        </table>
                        </div>
                    </div>
                </div> 
                <!-- Datos del crédito documentos del plan -->
                <div class="card mt-3 card-color-cinco">
                    <div class="card-title">
                        <h3 class="ml-3 mt-3">Documentos del plan</h3>
                    </div>
                    <div class="card-body" id="documentos_plan">

                    </div>
                        
                </div> 
                <!-- Observaciones del crédito -->
                <div class="card mt-3 card-color-seis">
                    <div class="card-title">
                        <h3 class="ml-3 mt-3">Observaciones</h3>
                    </div>
                    <div class="card-body" >
                        <textarea name="observaciones" id="observaciones" class="form-control" rows="5" placeholder="Observaciones"></textarea>
                        
                    </div>
                        
                </div> 
                <button class="btn btn-exito mt-3" type="submit">Generar crédito</button>
            </form>
    </div>
</div>

<script src="/static/js/otorgamiento.js"></script>

{% endblock %}